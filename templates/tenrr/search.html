{% extends 'tenrr/base.html' %}
{% block extra_css %}

<style>
    .posts-list .post {
        border: 1px solid #ddd;
        padding: 20px;
        margin-bottom: 20px;
        border-radius: 5px;
    }
</style>
{% endblock %}
{% block content %}
<div class="container">
    <h1>Search Posts</h1>
    <form method="get" action="{% url 'tenrr:search' %}">
        <input type="text" name="q" placeholder="Search for posts..." value="{{ request.GET.q }}">
        <select name="category">
            <option value="">All Categories</option>
            {% for category in categories %}
            <option value="{{ category.id }}" {% if selected_category_id == category.id %}selected{% endif %}>
                {{ category.name }}
            </option>
            {% endfor %}
        </select>
        <button type="submit">Search</button>
    </form>

    <div class="posts-list">
        {% for post in posts %}
        <div class="post">
            <h3>{{ post.title }}</h3>
            <p>{{ post.content }}</p>
            <p>Category: {{ post.category.name }}</p>
            <p>Price: Â£{{ post.price }}</p>
            <p>Posted by: {{ post.author.username }}</p>
        </div>
        {% empty %}
        <p>No posts found.</p>
        {% endfor %}
    </div>
</div>
{% endblock %}